{"componentChunkName":"component---src-pages-common-canvas-enabling-external-node-creation-mdx","path":"/common-canvas/enabling-external-node-creation/","result":{"pageContext":{"frontmatter":{"title":"Enabling external node creation","description":"Enabling external node creation"},"relativePagePath":"/common-canvas/enabling-external-node-creation.mdx","titleType":"page","MdxNode":{"id":"9700cc76-28ca-5302-93b0-febc41071150","children":[],"parent":"62716f45-2e2e-5c3b-9c03-11f5adfbedc5","internal":{"content":"---\ntitle: Enabling external node creation\ndescription: Enabling external node creation\n---\n\n<PageDescription>\n\nCommon canvas supports the ability for an object from the your browser page to be dragged onto the canvas to initiate the creation of a node on the canvas.\n\n</PageDescription>\n\n<AnchorLinks >\n  <AnchorLink>Dragging an object from within the browser</AnchorLink>\n  <AnchorLink>Dragging object from the desktop or another application</AnchorLink>\n\n</AnchorLinks>\n\n\n\n## Dragging an object from within the browser\n\n\nTo begin, you need to set the object you want to drag into the canvas to be draggable:\n\n```    <div \n      draggable=\"true\"\n      onDragStart={this.onDragStart}\n      onDragOver={this.onDragOver}>\n      ....\n      ....\n    </div>\n\n```\n\nand then specify the on drag behavior like this\n\n```    onDragStart(ev) {\n       const evData = {\n          operation: \"addToCanvas\",\n          data: {\n             editType: \"createExternalNode\",\n             field1: \"field_val_1\",\n             field2: \"field_val_2\"\n             ....\n             ....\n          }\n       };\n       ev.dataTransfer.setData(\"text\", JSON.stringify(evData));\n    }\n\n```\n\nwhere...\n\n#### operation\nis always set to \"addToCanvas\"\n\n#### data\nis the object that will be passed to the editActionHandler callback\n\n#### editType\nthis is the type of editing operation. You can set it to anything except any of the reserved settings which are: 'createNode', 'createNodeOnLink', 'createAutoNode' and 'createFromExternalObject'.\n\n#### fields\nan optional number of fields can be provided that describe the object you are dragging onto the canvas. For example, if it is a data object the fields might describe the data source details.\n\nAfter the object has been dropped on the canvas your editActionHandler() callback method will be called with a parameter data object that contains the fields you specified in `data` in the drag data along with three additional fields, called pipelineId, offsetX and offsetY, containing the x,y co-ordinates of where the drop occurred. In your editActionHandler() method you can use the CanvasController API to add a node to the pipeline flow and get common canvas to display it.\n\n\n## Dragging object from the desktop or another application\n\nIf an object from the desktop or another application is dropped on the canvas your editActionHandler(data) method will be called with the data parameter set to an object like this:\n\n```\n    {\n       dataTransfer: <The event data from the drag operation>,\n       editType: \"createFromExternalObject\",\n       editSource: \"canvas\",\n       offsetX: 200,\n       offsetY: 100,\n       pipelineId: \"1234-5678\"\n    }      \n\n```\n\nYour code can examine the `dataTransfer` object to see what object was dragged onto the canvas and then take appropriate action.\n\nIf you want a new node to appear on the canvas as a result of the object being dropped your code will need to create that node at the point where the drop occurred, using the Canvas Controller API. Here is some sample code that will\n\n* create a new node template based on the \"variablefile\" node in the palette data\n* set the label of the node to be created to the name of the file being dropped\n* create a new node on the canvas at the offsetX, offsetY position\n* the command will be added to the command-stack so the user can click undo to undo the addition of the node\n\n`data` is the parameter passed into your `editActionHandler` method.\n\n```\n    if (data.editType === \"createFromExternalObject\") {\n        const nodeTemplate = canvasController.getPaletteNode(\"variablefile\");\n        if (nodeTemplate) {\n            const convertedTemplate = canvasController.convertNodeTemplate(nodeTemplate);\n            convertedTemplate.label = data.dataTransfer.files[0].name;\n            const action = {\n                editType: \"createNode\",\n                nodeTemplate: convertedTemplate,\n                pipelineId: data.pipelineId,\n                offsetX: data.offsetX,\n                offsetY: data.offsetY\n            };\n            canvasController.editActionHandler(action);\n    }\n```\n\n<InlineNotification>\n\n**Tip:** You can optionally instruct common canvas to display a graphic over the canvas as the external object is being dragged over it. To do this you need to specify the enableDropZoneOnExternalDrag configuration parameter.\n\n</InlineNotification>\n\n\n","type":"Mdx","contentDigest":"fe4ab596f8b0ef5c5fcef51324d903c3","owner":"gatsby-plugin-mdx","counter":413},"frontmatter":{"title":"Enabling external node creation","description":"Enabling external node creation"},"exports":{},"rawBody":"---\ntitle: Enabling external node creation\ndescription: Enabling external node creation\n---\n\n<PageDescription>\n\nCommon canvas supports the ability for an object from the your browser page to be dragged onto the canvas to initiate the creation of a node on the canvas.\n\n</PageDescription>\n\n<AnchorLinks >\n  <AnchorLink>Dragging an object from within the browser</AnchorLink>\n  <AnchorLink>Dragging object from the desktop or another application</AnchorLink>\n\n</AnchorLinks>\n\n\n\n## Dragging an object from within the browser\n\n\nTo begin, you need to set the object you want to drag into the canvas to be draggable:\n\n```    <div \n      draggable=\"true\"\n      onDragStart={this.onDragStart}\n      onDragOver={this.onDragOver}>\n      ....\n      ....\n    </div>\n\n```\n\nand then specify the on drag behavior like this\n\n```    onDragStart(ev) {\n       const evData = {\n          operation: \"addToCanvas\",\n          data: {\n             editType: \"createExternalNode\",\n             field1: \"field_val_1\",\n             field2: \"field_val_2\"\n             ....\n             ....\n          }\n       };\n       ev.dataTransfer.setData(\"text\", JSON.stringify(evData));\n    }\n\n```\n\nwhere...\n\n#### operation\nis always set to \"addToCanvas\"\n\n#### data\nis the object that will be passed to the editActionHandler callback\n\n#### editType\nthis is the type of editing operation. You can set it to anything except any of the reserved settings which are: 'createNode', 'createNodeOnLink', 'createAutoNode' and 'createFromExternalObject'.\n\n#### fields\nan optional number of fields can be provided that describe the object you are dragging onto the canvas. For example, if it is a data object the fields might describe the data source details.\n\nAfter the object has been dropped on the canvas your editActionHandler() callback method will be called with a parameter data object that contains the fields you specified in `data` in the drag data along with three additional fields, called pipelineId, offsetX and offsetY, containing the x,y co-ordinates of where the drop occurred. In your editActionHandler() method you can use the CanvasController API to add a node to the pipeline flow and get common canvas to display it.\n\n\n## Dragging object from the desktop or another application\n\nIf an object from the desktop or another application is dropped on the canvas your editActionHandler(data) method will be called with the data parameter set to an object like this:\n\n```\n    {\n       dataTransfer: <The event data from the drag operation>,\n       editType: \"createFromExternalObject\",\n       editSource: \"canvas\",\n       offsetX: 200,\n       offsetY: 100,\n       pipelineId: \"1234-5678\"\n    }      \n\n```\n\nYour code can examine the `dataTransfer` object to see what object was dragged onto the canvas and then take appropriate action.\n\nIf you want a new node to appear on the canvas as a result of the object being dropped your code will need to create that node at the point where the drop occurred, using the Canvas Controller API. Here is some sample code that will\n\n* create a new node template based on the \"variablefile\" node in the palette data\n* set the label of the node to be created to the name of the file being dropped\n* create a new node on the canvas at the offsetX, offsetY position\n* the command will be added to the command-stack so the user can click undo to undo the addition of the node\n\n`data` is the parameter passed into your `editActionHandler` method.\n\n```\n    if (data.editType === \"createFromExternalObject\") {\n        const nodeTemplate = canvasController.getPaletteNode(\"variablefile\");\n        if (nodeTemplate) {\n            const convertedTemplate = canvasController.convertNodeTemplate(nodeTemplate);\n            convertedTemplate.label = data.dataTransfer.files[0].name;\n            const action = {\n                editType: \"createNode\",\n                nodeTemplate: convertedTemplate,\n                pipelineId: data.pipelineId,\n                offsetX: data.offsetX,\n                offsetY: data.offsetY\n            };\n            canvasController.editActionHandler(action);\n    }\n```\n\n<InlineNotification>\n\n**Tip:** You can optionally instruct common canvas to display a graphic over the canvas as the external object is being dragged over it. To do this you need to specify the enableDropZoneOnExternalDrag configuration parameter.\n\n</InlineNotification>\n\n\n","fileAbsolutePath":"/Users/dsobryan/Documents/ElyraOS/elyra-ai-site/src/pages/common-canvas/enabling-external-node-creation.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}