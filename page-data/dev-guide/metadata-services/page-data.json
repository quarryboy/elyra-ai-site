{"componentChunkName":"component---src-pages-dev-guide-metadata-services-mdx","path":"/dev-guide/metadata-services/","result":{"pageContext":{"frontmatter":{"title":"Metadata services","description":"Metadata services"},"relativePagePath":"/dev-guide/metadata-services.mdx","titleType":"page","MdxNode":{"id":"97d5b92e-693d-5fbf-953c-6a4b95a8a24a","children":[],"parent":"03642fda-73eb-503c-b48d-2988c70dccc3","internal":{"content":"---\ntitle: Metadata services\ndescription: Metadata services\n---\n\nexport const Title = () => (\n  <span>\n    Metadata services\n  </span>\n);\n\n<PageDescription>\n\nWhile building Enterprise extensions for the Elyra project we identified that there is very often a requirement to integrate with external runtimes, data sources, and other components hosted in remote locations or that need additional metadata in order to connect to these external components.\n</PageDescription>\n\nThe **Metadata Service** provides a generic service that can be used to store metadata\nthat can be easily integrated with Elyra backend and/or frontend components.\n\n![Metadata Services](../images/ai/metadata-components.png)\n\n### Metadata Services structure using the default file system store\n\nThe default implementation is for the metadata services to store metadata files in the file system, grouped\nby directories based on the type of metadata. \n\nThe root directory for metadata is relative to the 'Jupyter Data directory' (e.g. jupyter --data-dir)\n\n```\n/Users/xxx/Library/Jupyter/metadata/\n```\n\nEach type of metadata is then stored in a child directory, which internally is\nreferred to as the `namespace`. \n\nAs an example `runtimes` is the namespace for runtime metadata instances that reside in the following directory:\n\n```\n/Users/xxx/Library/Jupyter/metadata/runtimes\n```\n\nThe contents of this folder would then include multiple metadata files, each associated with a type or schema corresponding to the desired runtime platform.\n\nFor example, the following contains runtime metadata for two runtime platforms, airflow and kfp, \nwhere each runtime type has 1 or 2 runtimes defined, respectively.\n\n```\n/Users/xxx/Library/Jupyter/metadata/runtimes/airflow-cloud.json\n/Users/xxx/Library/Jupyter/metadata/runtimes/kfp-fyre.json\n/Users/xxx/Library/Jupyter/metadata/runtimes/kfp-qa.json\n```\n\nAnd each metadata file looks like:\n\n```json\n{\n  \"display_name\": \"Kubeflow Pipeline - Fyre\",\n  \"schema_name\": \"kfp\",\n  \"metadata\": {\n    \"api_endpoint\": \"http://weakish1.fyre.ibm.com:32488/pipeline\",\n    \"api_username\": \"username@email.com\",\n    \"api_password\": \"mypassword\",\n    \"cos_endpoint\": \"http://weakish1.fyre.ibm.com:30427\",\n    \"cos_username\": \"minio\",\n    \"cos_password\": \"minio123\",\n    \"cos_bucket\": \"test-bucket\",\n    \"tags\": [\n      \"kfp\", \"v1.1\"\n    ]\n  }\n}\n```\n\nBecause the runtime platform schemas are considered \"factory data\", the schema files are provided as part of the distribution and are located in the Elyra distribution under `elyra/metadata/schemas`:\n\n```\n[path to python distributions]/elyra/metadata/schemas/kfp.json\n[path to python distributions]/elyra/metadata/schemas/airflow.json\n```\n\n\n### Metadata Client API\n\nUsers can easily manipulate metadata via the Client API\n\n```bash\nelyra-metadata list runtimes\n```\n\n```\nAvailable metadata instances for runtimes (includes invalid):\n\nSchema   Instance       Resource  \n------   --------       -------- \nkfp      kfp-fyre       /Users/lresende/Library/Jupyter/metadata/runtimes/kfp-fyre.json\nkfp      kfp-qa         /Users/lresende/Library/Jupyter/metadata/runtimes/kfp-qa.json\nairflow  airflow-cloud  /Users/lresende/Library/Jupyter/metadata/runtimes/airflow-cloud.json\n```\n\n### Metadata Service REST API\n\nA REST API is available for easy integration with frontend components:\n\nRetrieve all metadata for a given namespace:\n\n```REST\nGET /elyra/metadata/<namespace>\n```\n\nRetrieve a given metadata resource from a given namespace:\n\n```REST\nGET /elyra/metadata/<namespace>/<resource>\n```\n\n\n### Metadata APIs\nA Python API is also available for accessing and manipulating metadata.  This is accomplished using the `MetadataManager` along with a corresponding storage class.  The default storage class is `FileMetadataStore`.\n\n```Python\nfrom elyra.metadata import MetadataManager, FileMetadataStore\n\nmetadata_manager = MetadataManager(namespace=\"runtimes\",\n                                   store=FileMetadataStore(namespace='runtimes'))\n\nruntime_configuration = metadata_manager.get('kfp')\n\nif not runtime_configuration:\n    raise RuntimeError(\"Runtime metadata not available.\")\n\napi_endpoint = runtime_configuration.metadata['api_endpoint']\napi_username = runtime_configuration.metadata['api_username']\napi_password = runtime_configuration.metadata['api_password']\ncos_endpoint = runtime_configuration.metadata['cos_endpoint']\ncos_username = runtime_configuration.metadata['cos_username']\ncos_password = runtime_configuration.metadata['cos_password']\nbucket_name = runtime_configuration.metadata['cos_bucket']\ntags = runtime_configuration.metadata['tags']\n\n```\n\n\n\n","type":"Mdx","contentDigest":"2d1aa6593e7f2a42784974757ae01bfe","owner":"gatsby-plugin-mdx","counter":371},"frontmatter":{"title":"Metadata services","description":"Metadata services"},"exports":{},"rawBody":"---\ntitle: Metadata services\ndescription: Metadata services\n---\n\nexport const Title = () => (\n  <span>\n    Metadata services\n  </span>\n);\n\n<PageDescription>\n\nWhile building Enterprise extensions for the Elyra project we identified that there is very often a requirement to integrate with external runtimes, data sources, and other components hosted in remote locations or that need additional metadata in order to connect to these external components.\n</PageDescription>\n\nThe **Metadata Service** provides a generic service that can be used to store metadata\nthat can be easily integrated with Elyra backend and/or frontend components.\n\n![Metadata Services](../images/ai/metadata-components.png)\n\n### Metadata Services structure using the default file system store\n\nThe default implementation is for the metadata services to store metadata files in the file system, grouped\nby directories based on the type of metadata. \n\nThe root directory for metadata is relative to the 'Jupyter Data directory' (e.g. jupyter --data-dir)\n\n```\n/Users/xxx/Library/Jupyter/metadata/\n```\n\nEach type of metadata is then stored in a child directory, which internally is\nreferred to as the `namespace`. \n\nAs an example `runtimes` is the namespace for runtime metadata instances that reside in the following directory:\n\n```\n/Users/xxx/Library/Jupyter/metadata/runtimes\n```\n\nThe contents of this folder would then include multiple metadata files, each associated with a type or schema corresponding to the desired runtime platform.\n\nFor example, the following contains runtime metadata for two runtime platforms, airflow and kfp, \nwhere each runtime type has 1 or 2 runtimes defined, respectively.\n\n```\n/Users/xxx/Library/Jupyter/metadata/runtimes/airflow-cloud.json\n/Users/xxx/Library/Jupyter/metadata/runtimes/kfp-fyre.json\n/Users/xxx/Library/Jupyter/metadata/runtimes/kfp-qa.json\n```\n\nAnd each metadata file looks like:\n\n```json\n{\n  \"display_name\": \"Kubeflow Pipeline - Fyre\",\n  \"schema_name\": \"kfp\",\n  \"metadata\": {\n    \"api_endpoint\": \"http://weakish1.fyre.ibm.com:32488/pipeline\",\n    \"api_username\": \"username@email.com\",\n    \"api_password\": \"mypassword\",\n    \"cos_endpoint\": \"http://weakish1.fyre.ibm.com:30427\",\n    \"cos_username\": \"minio\",\n    \"cos_password\": \"minio123\",\n    \"cos_bucket\": \"test-bucket\",\n    \"tags\": [\n      \"kfp\", \"v1.1\"\n    ]\n  }\n}\n```\n\nBecause the runtime platform schemas are considered \"factory data\", the schema files are provided as part of the distribution and are located in the Elyra distribution under `elyra/metadata/schemas`:\n\n```\n[path to python distributions]/elyra/metadata/schemas/kfp.json\n[path to python distributions]/elyra/metadata/schemas/airflow.json\n```\n\n\n### Metadata Client API\n\nUsers can easily manipulate metadata via the Client API\n\n```bash\nelyra-metadata list runtimes\n```\n\n```\nAvailable metadata instances for runtimes (includes invalid):\n\nSchema   Instance       Resource  \n------   --------       -------- \nkfp      kfp-fyre       /Users/lresende/Library/Jupyter/metadata/runtimes/kfp-fyre.json\nkfp      kfp-qa         /Users/lresende/Library/Jupyter/metadata/runtimes/kfp-qa.json\nairflow  airflow-cloud  /Users/lresende/Library/Jupyter/metadata/runtimes/airflow-cloud.json\n```\n\n### Metadata Service REST API\n\nA REST API is available for easy integration with frontend components:\n\nRetrieve all metadata for a given namespace:\n\n```REST\nGET /elyra/metadata/<namespace>\n```\n\nRetrieve a given metadata resource from a given namespace:\n\n```REST\nGET /elyra/metadata/<namespace>/<resource>\n```\n\n\n### Metadata APIs\nA Python API is also available for accessing and manipulating metadata.  This is accomplished using the `MetadataManager` along with a corresponding storage class.  The default storage class is `FileMetadataStore`.\n\n```Python\nfrom elyra.metadata import MetadataManager, FileMetadataStore\n\nmetadata_manager = MetadataManager(namespace=\"runtimes\",\n                                   store=FileMetadataStore(namespace='runtimes'))\n\nruntime_configuration = metadata_manager.get('kfp')\n\nif not runtime_configuration:\n    raise RuntimeError(\"Runtime metadata not available.\")\n\napi_endpoint = runtime_configuration.metadata['api_endpoint']\napi_username = runtime_configuration.metadata['api_username']\napi_password = runtime_configuration.metadata['api_password']\ncos_endpoint = runtime_configuration.metadata['cos_endpoint']\ncos_username = runtime_configuration.metadata['cos_username']\ncos_password = runtime_configuration.metadata['cos_password']\nbucket_name = runtime_configuration.metadata['cos_bucket']\ntags = runtime_configuration.metadata['tags']\n\n```\n\n\n\n","fileAbsolutePath":"/Users/dsobryan/Documents/ElyraOS/elyra-ai-site/src/pages/dev-guide/metadata-services.mdx"}}},"staticQueryHashes":["1364590287","137577622","137577622","2102389209","2102389209","2456312558","2746626797","2746626797","3018647132","3018647132","3037994772","3037994772","768070550"]}